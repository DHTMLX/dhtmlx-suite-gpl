/*
@license

undefined v.6.3.1 Professional

This software is covered by DHTMLX Commercial License.
Usage without proper license is prohibited.

(c) XB Software.

*/
if(window.dhx&&(window.dhx_legacy=dhx,delete window.dhx),function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.dhx=e():t.dhx=e()}(window,function(){return function(t){var e={};function r(i){if(e[i])return e[i].exports;var n=e[i]={i:i,l:!1,exports:{}};return t[i].call(n.exports,n,n.exports,r),n.l=!0,n.exports}return r.m=t,r.c=e,r.d=function(t,e,i){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(r.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)r.d(i,n,function(e){return t[e]}.bind(null,n));return i},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="/codebase/",r(r.s=8)}([function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=r(1),n=r(14);e.isEqualObj=function(t,e){for(var r in t)if(t[r]!==e[r])return!1;return!0},e.naturalCompare=function(t,e){if(isNaN(t)||isNaN(e)){var r=[],i=[];for(t.replace(/(\d+)|(\D+)/g,function(t,e,i){r.push([e||1/0,i||""])}),e.replace(/(\d+)|(\D+)/g,function(t,e,r){i.push([e||1/0,r||""])});r.length&&i.length;){var n=r.shift(),o=i.shift(),s=n[0]-o[0]||n[1].localeCompare(o[1]);if(s)return s}return r.length-i.length}return t-e},e.findByConf=function(t,e){if("function"==typeof e){if(e.call(this,t))return t}else if(e.by&&e.match&&t[e.by]===e.match)return t},e.isDebug=function(){var t=window.dhx;if(void 0!==t)return void 0!==t.debug&&t.debug},e.dhxWarning=function(t){console.warn(t)},e.dhxError=function(t){throw new Error(t)},e.toProxy=function(t){var e=typeof t;return"string"===e?new i.DataProxy(t):"object"===e?t:void 0},e.toDataDriver=function(t){if("string"==typeof t){var e=window.dhx,r=e&&e.dataDrivers||n.dataDrivers;if(r[t])return new r[t];console.warn("Incorrect data driver type:",t),console.warn("Available types:",JSON.stringify(Object.keys(r)))}else if("object"==typeof t)return t},e.copyWithoutInner=function(t,e){var r={};for(var i in t)"$"===i[0]||e&&e[i]||(r[i]=t[i]);return r},e.isTreeCollection=function(t){return Boolean(t.getRoot)},e.hasJsonOrArrayStructure=function(t){if("object"==typeof t)return!0;if("string"!=typeof t)return!1;try{var e=JSON.parse(t);return"[object Object]"===Object.prototype.toString.call(e)||Array.isArray(e)}catch(t){return!1}}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=r(5),n=function(){function t(t,e){this.url=this._url=t,this.config=e}return t.prototype.updateUrl=function(t,e){for(var r in void 0===e&&(e={}),this._url=this.url=t||this._url,this.url+="?",e)this.config[r]=e[r],this.url+=r+"="+encodeURIComponent(e[r])+"&";this.url=this.url.slice(0,-1)},t.prototype.load=function(){return i.ajax.get(this.url,null,{responseType:"text"})},t.prototype.save=function(t,e){switch(e){case"delete":return i.ajax.delete(this.url,t);case"update":case"insert":default:return i.ajax.post(this.url,t)}},t}();e.DataProxy=n},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),function(t){t.all="all",t.level="level",t.leafs="leafs"}(e.TreeFilterType||(e.TreeFilterType={})),function(t){t.top="top",t.bot="bot",t.in="in"}(e.DropPosition||(e.DropPosition={})),function(t){t.afterAdd="afteradd",t.beforeAdd="beforeadd",t.removeAll="removeall",t.beforeRemove="beforeremove",t.afterRemove="afterremove",t.change="change",t.load="load",t.loadError="loaderror",t.beforeLazyLoad="beforelazyload",t.afterLazyLoad="afterlazyload"}(e.DataEvents||(e.DataEvents={})),function(t){t.beforeDrag="beforedrag",t.beforeDrop="beforeDrop",t.dragStart="dragstart",t.dragEnd="dragend",t.canDrop="candrop",t.cancelDrop="canceldrop",t.dropComplete="dropcomplete",t.dragOut="dragOut",t.dragIn="dragIn"}(e.DragEvents||(e.DragEvents={})),function(t){t.target="target",t.both="both",t.source="source"}(e.DragMode||(e.DragMode={})),function(t){t.child="child",t.sibling="sibling",t.complex="complex"}(e.DropBehaviour||(e.DropBehaviour={})),function(t){t.json="json",t.csv="csv",t.xml="xml"}(e.DataDriver||(e.DataDriver={}))},function(t,e,r){(function(e,r){!function(){var i=1,n={},o=!1;function s(t){e.setImmediate?r(t):e.importScripts?setTimeout(t):(n[++i]=t,e.postMessage(i,"*"))}function a(t){"use strict";if("function"!=typeof t&&void 0!=t)throw TypeError();if("object"!=typeof this||this&&this.then)throw TypeError();var e,r,i=this,n=0,o=0,u=[];i.promise=i,i.resolve=function(t){return e=i.fn,r=i.er,n||(o=t,n=1,s(f)),i},i.reject=function(t){return e=i.fn,r=i.er,n||(o=t,n=2,s(f)),i},i._d=1,i.then=function(t,e){if(1!=this._d)throw TypeError();var r=new a;return r.fn=t,r.er=e,3==n?r.resolve(o):4==n?r.reject(o):u.push(r),r},i.catch=function(t){return i.then(null,t)};var c=function(t){n=t||4,u.map(function(t){3==n&&t.resolve(o)||t.reject(o)})};try{"function"==typeof t&&t(i.resolve,i.reject)}catch(t){i.reject(t)}return i;function h(t,e,r,i){if(2==n)return i();if("object"!=typeof o&&"function"!=typeof o||"function"!=typeof t)i();else try{var s=0;t.call(o,function(t){s++||(o=t,e())},function(t){s++||(o=t,r())})}catch(t){o=t,r()}}function f(){var t;try{t=o&&o.then}catch(t){return o=t,n=2,f()}h(t,function(){n=1,f()},function(){n=2,f()},function(){try{1==n&&"function"==typeof e?o=e(o):2==n&&"function"==typeof r&&(o=r(o),n=1)}catch(t){return o=t,c()}o==i?(o=TypeError(),c()):h(t,function(){c(3)},c,function(){c(1==n&&3)})})}}(e=this).setImmediate||e.addEventListener("message",function(t){if(t.source==e)if(o)s(n[t.data]);else{o=!0;try{n[t.data]()}catch(t){}delete n[t.data],o=!1}}),a.resolve=function(t){if(1!=this._d)throw TypeError();return t instanceof a?t:new a(function(e){e(t)})},a.reject=function(t){if(1!=this._d)throw TypeError();return new a(function(e,r){r(t)})},a.all=function(t){if(1!=this._d)throw TypeError();if(!(t instanceof Array))return a.reject(TypeError());var e=new a;return function r(i,n){return n?e.resolve(n):i?e.reject(i):(0==t.reduce(function(t,e){return e&&e.then?t+1:t},0)&&e.resolve(t),void t.map(function(e,i){e&&e.then&&e.then(function(e){return t[i]=e,r(),e},r)}))}(),e},a.race=function(t){if(1!=this._d)throw TypeError();if(!(t instanceof Array))return a.reject(TypeError());if(0==t.length)return new a;var e=new a;return function r(i,n){return n?e.resolve(n):i?e.reject(i):(0==t.reduce(function(t,e){return e&&e.then?t+1:t},0)&&e.resolve(t),void t.map(function(t,e){t&&t.then&&t.then(function(t){r(null,t)},r)}))}(),e},a._d=1,t.exports=a}()}).call(this,r(4),r(11).setImmediate)},function(t,e){var r;r=function(){return this}();try{r=r||new Function("return this")()}catch(t){"object"==typeof window&&(r=window)}t.exports=r},function(t,e,r){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0});var i=r(2),n=r(0);function o(t){return t?t.indexOf("json")>=0?"json":t.indexOf("xml")>=0?"xml":"text":"text"}function s(e,r,s,a,u){var c=a||{};if(u&&(c.Accept="application/"+u),"GET"!==s&&(c["Content-Type"]=c["Content-Type"]||"application/json"),"GET"===s){var h=r&&"object"==typeof r?function(t){return Object.keys(t).reduce(function(e,r){var i="object"==typeof t[r]?JSON.stringify(t[r]):t[r];return e.push(r+"="+encodeURIComponent(i)),e},[]).join("&")}(r):r&&"string"==typeof r?r:"";h&&(e+=-1===e.indexOf("?")?"?":"&",e+=h),r=null}return window.fetch?window.fetch(e,{method:s,body:r?JSON.stringify(r):null,headers:c}).then(function(e){if(!e.ok)return e.text().then(function(r){return t.reject({status:e.status,statusText:e.statusText,message:r})});var r=u||o(e.headers.get("Content-Type"));if("raw"===r)return{headers:Object.fromEntries(e.headers.entries()),url:e.url,body:e.body};if(204!==e.status)switch(r){case"json":return e.json();case"xml":var s=n.toDataDriver(i.DataDriver.xml);return s?e.text().then(function(t){return s.toJsonObject(t)}):e.text();default:return e.text()}}):new t(function(t,a){var h=new XMLHttpRequest;for(var f in h.onload=function(){h.status>=200&&h.status<300?("raw"===u&&t({url:h.responseURL,headers:h.getAllResponseHeaders().trim().split(/[\r\n]+/).reduce(function(t,e){var r=e.split(": ");return t[r[0]]=r[1],t},{}),body:h.response}),204===h.status?t():t(function(t,e){switch(e){case"json":return JSON.parse(t);case"text":return t;case"xml":var r=n.toDataDriver(i.DataDriver.xml);return r?r.toJsonObject(t):{parseError:"Incorrect data driver type: 'xml'"};default:return t}}(h.responseText,u||o(h.getResponseHeader("Content-Type"))))):a({status:h.status,statusText:h.statusText})},h.onerror=function(){a({status:h.status,statusText:h.statusText,message:h.responseText})},h.open(s,e),c)h.setRequestHeader(f,c[f]);switch(s){case"POST":case"DELETE":case"PUT":h.send(void 0!==r?JSON.stringify(r):"");break;case"GET":default:h.send()}})}e.ajax={get:function(t,e,r){return s(t,e,"GET",r&&r.headers,void 0!==r?r.responseType:void 0)},post:function(t,e,r){return s(t,e,"POST",r&&r.headers,void 0!==r?r.responseType:void 0)},put:function(t,e,r){return s(t,e,"PUT",r&&r.headers,void 0!==r?r.responseType:void 0)},delete:function(t,e,r){return s(t,e,"DELETE",r&&r.headers,void 0!==r?r.responseType:void 0)}}}).call(this,r(3))},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=r(20),n=(new Date).valueOf();e.uid=function(){return"u"+n++},e.extend=function t(e,r,i){if(void 0===i&&(i=!0),r)for(var n in r){var o=r[n],s=e[n];void 0===o?delete e[n]:!i||"object"!=typeof s||s instanceof Date||s instanceof Array?e[n]=o:t(s,o)}return e},e.copy=function(t,e){var r={};for(var i in t)e&&"$"===i[0]||(r[i]=t[i]);return r},e.naturalSort=function(t){return t.sort(function(t,e){return"string"==typeof t?t.localeCompare(e):t-e})},e.findIndex=function(t,e){for(var r=t.length,i=0;i<r;i++)if(e(t[i]))return i;return-1},e.isEqualString=function(t,e){if(t.length>e.length)return!1;for(var r=0;r<t.length;r++)if(t[r].toLowerCase()!==e[r].toLowerCase())return!1;return!0},e.singleOuterClick=function(t){var e=function(r){t(r)&&document.removeEventListener("click",e)};document.addEventListener("click",e)},e.detectWidgetClick=function(t,e){var r=function(r){return e(i.locate(r,"dhx_widget_id")===t)};return document.addEventListener("click",r),function(){return document.removeEventListener("click",r)}},e.unwrapBox=function(t){return Array.isArray(t)?t[0]:t},e.wrapBox=function(t){return Array.isArray(t)?t:[t]},e.isDefined=function(t){return null!==t&&void 0!==t},e.range=function(t,e){if(t>e)return[];for(var r=[];t<=e;)r.push(t++);return r},e.isNumeric=function(t){return!isNaN(t-parseFloat(t))},e.downloadFile=function(t,e,r){void 0===r&&(r="text/plain");var i=new Blob([t],{type:r});if(window.navigator.msSaveOrOpenBlob)window.navigator.msSaveOrOpenBlob(i,e);else{var n=document.createElement("a"),o=URL.createObjectURL(i);n.href=o,n.download=e,document.body.appendChild(n),n.click(),setTimeout(function(){document.body.removeChild(n),window.URL.revokeObjectURL(o)},0)}},e.debounce=function(t,e,r){var i;return function(){var n=this,o=arguments,s=r&&!i;clearTimeout(i),i=setTimeout(function(){i=null,r||t.apply(n,o)},e),s&&t.apply(this,o)}}},function(t,e,r){"use strict";var i=this&&this.__assign||function(){return(i=Object.assign||function(t){for(var e,r=1,i=arguments.length;r<i;r++)for(var n in e=arguments[r])Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t}).apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0});var n=r(9),o=r(10),s=r(19),a=r(1),u=r(0),c=r(2),h=r(6),f=function(){function t(t,e){this.config=t||{},this._order=[],this._pull={},this._changes={order:[]},this._initOrder=null,this._sort=new s.Sort,this._loader=new o.Loader(this,this._changes),this.events=e||new n.EventSystem(this),this.events.on(c.DataEvents.loadError,function(t){"string"!=typeof t?u.dhxError(t):u.dhxWarning(t)})}return t.prototype.add=function(t,e){var r=this;if(this.events.fire(c.DataEvents.beforeAdd,[t]))return Array.isArray(t)?t.map(function(t,i){return 0!==i&&(e+=1),r._add(t,e)}):this._add(t,e)},t.prototype.remove=function(t){var e=this;t&&(t instanceof Array?t.map(function(t){e._remove(t)}):this._remove(t))},t.prototype.removeAll=function(){this._removeAll(),this.events.fire(c.DataEvents.removeAll),this.events.fire(c.DataEvents.change)},t.prototype.exists=function(t){return!!this._pull[t]},t.prototype.getNearId=function(t){if(!this._pull[t])return this._order[0].id||""},t.prototype.getItem=function(t){return this._pull[t]},t.prototype.update=function(t,e,r){var i=this.getItem(t);if(i){if(u.isEqualObj(e,i))return;e.id&&t!==e.id?(u.dhxWarning("this method doesn't allow change id"),u.isDebug()):(h.extend(this._pull[t],e,!1),this.config.update&&this.config.update(this._pull[t]),r||this._onChange("update",t,this._pull[t]))}else u.dhxWarning("item not found")},t.prototype.getIndex=function(t){var e=h.findIndex(this._order,function(e){return e.id===t});return this._pull[t]&&e>=0?e:-1},t.prototype.getId=function(t){if(this._order[t])return this._order[t].id},t.prototype.getLength=function(){return this._order.length},t.prototype.isDataLoaded=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=this._order.length),h.isNumeric(t)&&h.isNumeric(e)?!this._order.slice(t,e).find(function(t){return t.$empty}):!this._order.find(function(t){return t.$empty})},t.prototype.filter=function(t,e){if(this.isDataLoaded()){if((e=h.extend({add:!1,multiple:!0},e)).add||(this._order=this._initOrder||this._order,this._initOrder=null),this._filters=this._filters||{},e.multiple&&t||(this._filters={}),t){if("function"==typeof t){this._filters._={match:"_",compare:t}}else t.match?(t.compare=t.compare||function(t,e){return t===e},this._filters[t.by]=t):delete this._filters[t.by];this._applyFilters()}this.events.fire(c.DataEvents.change)}else u.dhxWarning("the method doesn't work with lazyLoad")},t.prototype.find=function(t){for(var e in this._pull){var r=u.findByConf(this._pull[e],t);if(r)return r}return null},t.prototype.findAll=function(t){var e=[];for(var r in this._pull){var i=u.findByConf(this._pull[r],t);i&&e.push(i)}return e},t.prototype.sort=function(t){if(this.isDataLoaded()){if(t)this._sort.sort(this._order,t),this._initOrder&&this._initOrder.length&&this._sort.sort(this._initOrder,t);else{for(var e in this._order=[],this._pull)this._order.push(this._pull[e]);this._applyFilters()}this.events.fire(c.DataEvents.change)}else u.dhxWarning("the method doesn't work with lazyLoad")},t.prototype.copy=function(t,e,r,i){var n=this;return t instanceof Array?t.map(function(t,o){return n._copy(t,e,r,i,o)}):this._copy(t,e,r,i)},t.prototype.move=function(t,e,r,i){var n=this;return t instanceof Array?t.map(function(t,o){return n._move(t,e,r,i,o)}):this._move(t,e,r,i)},t.prototype.forEach=function(t){for(var e=0;e<this._order.length;e++)t.call(this,this._order[e],e,this._order)},t.prototype.load=function(t,e){return"string"==typeof t&&(this.dataProxy=t=new a.DataProxy(t)),this.dataProxy=t,this._loader.load(t,e)},t.prototype.parse=function(t,e){return this._removeAll(),this._loader.parse(t,e)},t.prototype.$parse=function(t){var e=this.config.approximate;e&&(t=this._approximate(t,e.value,e.maxNum)),this._parse_data(t),this.events.fire(c.DataEvents.change,["load"]),this.events.fire(c.DataEvents.load)},t.prototype.save=function(t){this._loader.save(t)},t.prototype.changeId=function(t,e,r){if(void 0===e&&(e=h.uid()),r||this.isDataLoaded()){var i=this.getItem(t);i?(i.id=e,h.extend(this._pull[t],i),this._pull[e]=this._pull[t],r||this._onChange("update",e,this._pull[e]),delete this._pull[t]):u.dhxWarning("item not found")}else u.dhxWarning("the method doesn't work with lazyLoad")},t.prototype.isSaved=function(){return!this._changes.order.length},t.prototype.map=function(t){for(var e=[],r=0;r<this._order.length;r++)e.push(t.call(this,this._order[r],r,this._order));return e},t.prototype.mapRange=function(t,e,r){t<0&&(t=0),e>this._order.length-1&&(e=this._order.length-1);for(var i=this._order.slice(t,e),n=[],o=t;o<=e;o++)n.push(r.call(this,this._order[o],o,i));return n},t.prototype.reduce=function(t,e){for(var r=0;r<this._order.length;r++)e=t.call(this,e,this._order[r],r);return e},t.prototype.serialize=function(t){void 0===t&&(t=c.DataDriver.json);var e=this.map(function(t){var e=i({},t);return Object.keys(e).forEach(function(t){"$"===t[0]&&delete e[t]}),e}),r=u.toDataDriver(t);if(r)return r.serialize(e)},t.prototype.getInitialData=function(){return this._initOrder},t.prototype._add=function(t,e){if(this.isDataLoaded()){var r=this._addCore(t,e);return this._onChange("add",t.id,t),this.events.fire(c.DataEvents.afterAdd,[t]),r}u.dhxWarning("the method doesn't work with lazyLoad")},t.prototype._remove=function(t){if(this.isDataLoaded()){var e=this._pull[t];if(e){if(!this.events.fire(c.DataEvents.beforeRemove,[e]))return;this._removeCore(e.id),this._onChange("remove",t,e)}this.events.fire(c.DataEvents.afterRemove,[e])}else u.dhxWarning("the method doesn't work with lazyLoad")},t.prototype._copy=function(e,r,n,o,s){if(this.isDataLoaded()){if(!this.exists(e))return null;var a=h.uid();return s&&(r=-1===r?-1:r+s),n?n instanceof t||!o?n.exists(e)?(n.add(i({},u.copyWithoutInner(this.getItem(e)),{id:a}),r),a):(n.add(u.copyWithoutInner(this.getItem(e)),r),e):void n.add(u.copyWithoutInner(this.getItem(e)),r):(this.add(i({},u.copyWithoutInner(this.getItem(e)),{id:a}),r),a)}u.dhxWarning("the method doesn't work with lazyLoad")},t.prototype._move=function(t,e,r,i,n){if(this.isDataLoaded()){if(n&&(e=-1===e?-1:e+n),r&&r!==this&&this.exists(t)){var o=h.copy(this.getItem(t),!0);return r.exists(t)&&(o.id=h.uid()),i&&(o.parent=i),r.add(o,e),this.remove(t),o.id}if(this.getIndex(t)===e)return null;var s=this._order.splice(this.getIndex(t),1)[0];return-1===e&&(e=this._order.length),this._order.splice(e,0,s),this.events.fire(c.DataEvents.change),t}u.dhxWarning("the method doesn't work with lazyLoad")},t.prototype._removeAll=function(){this._pull={},this._order=[],this._changes.order=[],this._initOrder=null},t.prototype._addCore=function(t,e){return this.config.init&&(t=this.config.init(t)),t.id=t.id?t.id.toString():h.uid(),this._pull[t.id]&&u.dhxError("Item already exist"),this._initOrder&&this._initOrder.length&&this._addToOrder(this._initOrder,t,e),this._addToOrder(this._order,t,e),t.id},t.prototype._removeCore=function(t){this.getIndex(t)>=0&&(this._order=this._order.filter(function(e){return e.id!==t}),delete this._pull[t]),this._initOrder&&this._initOrder.length&&(this._initOrder=this._initOrder.filter(function(e){return e.id!==t}))},t.prototype._parse_data=function(t){var e=this._order.length;this.config.prep&&(t=this.config.prep(t));for(var r=0,i=t;r<i.length;r++){var n=i[r];this.config.init&&(n=this.config.init(n)),n.id=n.id||0===n.id?n.id:h.uid(),this._pull[n.id]=n,this._order[e++]=n}},t.prototype._approximate=function(t,e,r){for(var i=t.length,n=e.length,o=Math.floor(i/r),s=Array(Math.ceil(i/o)),a=0,u=0;u<i;u+=o){for(var c=h.copy(t[u]),f=Math.min(i,u+o),l=0;l<n;l++){for(var d=0,p=u;p<f;p++)d+=t[p][e[l]];c[e[l]]=d/(f-u)}s[a++]=c}return s},t.prototype._onChange=function(t,e,r){for(var n=0,o=this._changes.order;n<o.length;n++){var s=o[n];if(s.id===e&&!s.saving)return s.error&&(s.error=!1),s=i({},s,{obj:r,status:t}),void this.events.fire(c.DataEvents.change,[e,t,r])}this._changes.order.push({id:e,status:t,obj:i({},r),saving:!1}),this.events.fire(c.DataEvents.change,[e,t,r])},t.prototype._addToOrder=function(t,e,r){r>=0&&t[r]?(this._pull[e.id]=e,t.splice(r,0,e)):(this._pull[e.id]=e,t.push(e))},t.prototype._applyFilters=function(){var t=this;if(this._filters&&Object.keys(this._filters).length){var e=this._order.filter(function(e){return Object.keys(t._filters).every(function(r){return e[r]?t._filters[r].compare(e[r],t._filters[r].match,e):t._filters[r].compare(e)})});this._initOrder||(this._initOrder=this._order),this._order=e}},t}();e.DataCollection=f},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=r(7);e.DataCollection=i.DataCollection;var n=r(22);e.TreeCollection=n.TreeCollection;var o=r(5);e.ajax=o.ajax;var s=r(1);e.DataProxy=s.DataProxy;var a=r(23);e.LazyDataProxy=a.LazyDataProxy},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t){this.events={},this.context=t||this}return t.prototype.on=function(t,e,r){var i=t.toLowerCase();this.events[i]=this.events[i]||[],this.events[i].push({callback:e,context:r||this.context})},t.prototype.detach=function(t,e){var r=t.toLowerCase(),i=this.events[r];if(e&&i&&i.length)for(var n=i.length-1;n>=0;n--)i[n].context===e&&i.splice(n,1);else this.events[r]=[]},t.prototype.fire=function(t,e){void 0===e&&(e=[]);var r=t.toLowerCase();return!this.events[r]||this.events[r].map(function(t){return t.callback.apply(t.context,e)}).indexOf(!1)<0},t.prototype.clear=function(){this.events={}},t}();e.EventSystem=i,e.EventsMixin=function(t){var e=new i(t=t||{});t.detachEvent=e.detach.bind(e),t.attachEvent=e.on.bind(e),t.callEvent=e.fire.bind(e)}},function(t,e,r){"use strict";(function(t){var i=this&&this.__assign||function(){return(i=Object.assign||function(t){for(var e,r=1,i=arguments.length;r<i;r++)for(var n in e=arguments[r])Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t}).apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0});var n=r(0),o=r(2),s=function(){function e(t,e){this._parent=t,this._changes=e}return e.prototype.load=function(t,e){var r=this;if(!t.config||this._parent.events.fire(o.DataEvents.beforeLazyLoad,[]))return this._parent.loadData=t.load().then(function(t){return t?r.parse(t,e):[]}).catch(function(t){r._parent.events.fire(o.DataEvents.loadError,[t])})},e.prototype.parse=function(t,e){var r=this;if(void 0===e&&(e="json"),"json"!==e||n.hasJsonOrArrayStructure(t)||this._parent.events.fire(o.DataEvents.loadError,["Uncaught SyntaxError: Unexpected end of input"]),!((t=(e=n.toDataDriver(e)).toJsonArray(t))instanceof Array)){var s=t.total_count-1,a=t.from;if(t=t.data,0!==this._parent.getLength())return t.forEach(function(t,e){var o=a+e,s=r._parent.getId(o);if(s){var u=r._parent.getItem(s);u&&u.$empty&&(r._parent.changeId(s,t.id,!0),r._parent.update(t.id,i({},t,{$empty:void 0}),!0))}else n.dhxWarning("item not found")}),this._parent.events.fire(o.DataEvents.afterLazyLoad,[a,t.length]),this._parent.events.fire(o.DataEvents.change),t;for(var u=[],c=0,h=0;c<=s;c++)c>=a&&c<=a+t.length-1?(u.push(t[h]),h++):u.push({$empty:!0});t=u}return this._parent.removeAll(),this._parent.$parse(t),t},e.prototype.save=function(e){for(var r=this,i=function(i){if(i.saving||i.pending)n.dhxWarning("item is saving");else{var s=o._findPrevState(i.id);if(s&&s.saving){var a=new t(function(t,o){s.promise.then(function(){i.pending=!1,t(r._setPromise(i,e))}).catch(function(t){r._removeFromOrder(s),r._setPromise(i,e),n.dhxWarning(t),o(t)})});o._addToChain(a),i.pending=!0}else o._setPromise(i,e)}},o=this,s=0,a=this._changes.order;s<a.length;s++){i(a[s])}this._parent.saveData.then(function(){r._saving=!1})},e.prototype._setPromise=function(t,e){var r=this;return t.promise=e.save(t.obj,t.status),t.promise.then(function(){r._removeFromOrder(t)}).catch(function(e){t.saving=!1,t.error=!0,n.dhxError(e)}),t.saving=!0,this._saving=!0,this._addToChain(t.promise),t.promise},e.prototype._addToChain=function(t){this._parent.saveData&&this._saving?this._parent.saveData=this._parent.saveData.then(function(){return t}):this._parent.saveData=t},e.prototype._findPrevState=function(t){for(var e=0,r=this._changes.order;e<r.length;e++){var i=r[e];if(i.id===t)return i}return null},e.prototype._removeFromOrder=function(t){this._changes.order=this._changes.order.filter(function(e){return!n.isEqualObj(e,t)})},e}();e.Loader=s}).call(this,r(3))},function(t,e,r){(function(t){var i=void 0!==t&&t||"undefined"!=typeof self&&self||window,n=Function.prototype.apply;function o(t,e){this._id=t,this._clearFn=e}e.setTimeout=function(){return new o(n.call(setTimeout,i,arguments),clearTimeout)},e.setInterval=function(){return new o(n.call(setInterval,i,arguments),clearInterval)},e.clearTimeout=e.clearInterval=function(t){t&&t.close()},o.prototype.unref=o.prototype.ref=function(){},o.prototype.close=function(){this._clearFn.call(i,this._id)},e.enroll=function(t,e){clearTimeout(t._idleTimeoutId),t._idleTimeout=e},e.unenroll=function(t){clearTimeout(t._idleTimeoutId),t._idleTimeout=-1},e._unrefActive=e.active=function(t){clearTimeout(t._idleTimeoutId);var e=t._idleTimeout;e>=0&&(t._idleTimeoutId=setTimeout(function(){t._onTimeout&&t._onTimeout()},e))},r(12),e.setImmediate="undefined"!=typeof self&&self.setImmediate||void 0!==t&&t.setImmediate||this&&this.setImmediate,e.clearImmediate="undefined"!=typeof self&&self.clearImmediate||void 0!==t&&t.clearImmediate||this&&this.clearImmediate}).call(this,r(4))},function(t,e,r){(function(t,e){!function(t,r){"use strict";if(!t.setImmediate){var i,n=1,o={},s=!1,a=t.document,u=Object.getPrototypeOf&&Object.getPrototypeOf(t);u=u&&u.setTimeout?u:t,"[object process]"==={}.toString.call(t.process)?i=function(t){e.nextTick(function(){h(t)})}:function(){if(t.postMessage&&!t.importScripts){var e=!0,r=t.onmessage;return t.onmessage=function(){e=!1},t.postMessage("","*"),t.onmessage=r,e}}()?function(){var e="setImmediate$"+Math.random()+"$",r=function(r){r.source===t&&"string"==typeof r.data&&0===r.data.indexOf(e)&&h(+r.data.slice(e.length))};t.addEventListener?t.addEventListener("message",r,!1):t.attachEvent("onmessage",r),i=function(r){t.postMessage(e+r,"*")}}():t.MessageChannel?function(){var t=new MessageChannel;t.port1.onmessage=function(t){h(t.data)},i=function(e){t.port2.postMessage(e)}}():a&&"onreadystatechange"in a.createElement("script")?function(){var t=a.documentElement;i=function(e){var r=a.createElement("script");r.onreadystatechange=function(){h(e),r.onreadystatechange=null,t.removeChild(r),r=null},t.appendChild(r)}}():i=function(t){setTimeout(h,0,t)},u.setImmediate=function(t){"function"!=typeof t&&(t=new Function(""+t));for(var e=new Array(arguments.length-1),r=0;r<e.length;r++)e[r]=arguments[r+1];var s={callback:t,args:e};return o[n]=s,i(n),n++},u.clearImmediate=c}function c(t){delete o[t]}function h(t){if(s)setTimeout(h,0,t);else{var e=o[t];if(e){s=!0;try{!function(t){var e=t.callback,i=t.args;switch(i.length){case 0:e();break;case 1:e(i[0]);break;case 2:e(i[0],i[1]);break;case 3:e(i[0],i[1],i[2]);break;default:e.apply(r,i)}}(e)}finally{c(t),s=!1}}}}}("undefined"==typeof self?void 0===t?this:t:self)}).call(this,r(4),r(13))},function(t,e){var r,i,n=t.exports={};function o(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function a(t){if(r===setTimeout)return setTimeout(t,0);if((r===o||!r)&&setTimeout)return r=setTimeout,setTimeout(t,0);try{return r(t,0)}catch(e){try{return r.call(null,t,0)}catch(e){return r.call(this,t,0)}}}!function(){try{r="function"==typeof setTimeout?setTimeout:o}catch(t){r=o}try{i="function"==typeof clearTimeout?clearTimeout:s}catch(t){i=s}}();var u,c=[],h=!1,f=-1;function l(){h&&u&&(h=!1,u.length?c=u.concat(c):f=-1,c.length&&d())}function d(){if(!h){var t=a(l);h=!0;for(var e=c.length;e;){for(u=c,c=[];++f<e;)u&&u[f].run();f=-1,e=c.length}u=null,h=!1,function(t){if(i===clearTimeout)return clearTimeout(t);if((i===s||!i)&&clearTimeout)return i=clearTimeout,clearTimeout(t);try{i(t)}catch(e){try{return i.call(null,t)}catch(e){return i.call(this,t)}}}(t)}}function p(t,e){this.fun=t,this.array=e}function v(){}n.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)e[r-1]=arguments[r];c.push(new p(t,e)),1!==c.length||h||a(d)},p.prototype.run=function(){this.fun.apply(null,this.array)},n.title="browser",n.browser=!0,n.env={},n.argv=[],n.version="",n.versions={},n.on=v,n.addListener=v,n.once=v,n.off=v,n.removeListener=v,n.removeAllListeners=v,n.emit=v,n.prependListener=v,n.prependOnceListener=v,n.listeners=function(t){return[]},n.binding=function(t){throw new Error("process.binding is not supported")},n.cwd=function(){return"/"},n.chdir=function(t){throw new Error("process.chdir is not supported")},n.umask=function(){return 0}},function(t,e,r){"use strict";var i=this&&this.__assign||function(){return(i=Object.assign||function(t){for(var e,r=1,i=arguments.length;r<i;r++)for(var n in e=arguments[r])Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t}).apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0});var n=r(15),o=r(16),s=r(17);e.dataDrivers={json:n.JsonDriver,csv:o.CsvDriver},e.dataDriversPro=i({},e.dataDrivers,{xml:s.XMLDriver})},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(){}return t.prototype.toJsonArray=function(t){return this.getRows(t)},t.prototype.serialize=function(t){return t},t.prototype.getFields=function(t){return t},t.prototype.getRows=function(t){return"string"==typeof t?JSON.parse(t):t},t}();e.JsonDriver=i},function(t,e,r){"use strict";var i=this&&this.__assign||function(){return(i=Object.assign||function(t){for(var e,r=1,i=arguments.length;r<i;r++)for(var n in e=arguments[r])Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t}).apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t){this.config=i({},{skipHeader:0,nameByHeader:!1,rowDelimiter:"\n",columnDelimiter:","},t),this.config.nameByHeader&&(this.config.skipHeader=1)}return t.prototype.getFields=function(t,e){for(var r=t.trim().split(this.config.columnDelimiter),i={},n=0;n<r.length;n++)i[e?e[n]:n+1]=r[n];return i},t.prototype.getRows=function(t){return t.trim().split(this.config.rowDelimiter)},t.prototype.toJsonArray=function(t){var e=this,r=this.getRows(t),i=this.config.names;if(this.config.skipHeader){var n=r.splice(0,this.config.skipHeader);this.config.nameByHeader&&(i=n[0].trim().split(this.config.columnDelimiter))}return r.map(function(t){return e.getFields(t,i)})},t.prototype.serialize=function(t,e){var r=t[0]?Object.keys(t[0]).filter(function(t){return"$"!==t[0]}).join(this.config.columnDelimiter):"",i=this._serialize(t);return e?i:r+i},t.prototype._serialize=function(t){var e=this;return t.reduce(function(t,r){var i=Object.keys(r).reduce(function(t,i,n){return"$"===i[0]||"items"===i?t:""+t+r[i]+(n===r.length-1?"":e.config.columnDelimiter)},"");return r.items?t+"\n"+i+e._serialize(r.items):""+t+e.config.rowDelimiter+i},"")},t}();e.CsvDriver=n},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=r(18);var n=function(){function t(){}return t.prototype.toJsonArray=function(t){return this.getRows(t)},t.prototype.toJsonObject=function(t){var e;return"string"==typeof t&&(e=this._fromString(t)),function t(e,r){r=r||{};var i=e.attributes;if(i&&i.length)for(var n=0;n<i.length;n++)r[i[n].name]=i[n].value;var o=e.childNodes;for(n=0;n<o.length;n++)if(1===o[n].nodeType){var s=o[n].tagName;r[s]?("function"!=typeof r[s].push&&(r[s]=[r[s]]),r[s].push(t(o[n],{}))):r[s]=t(o[n],{})}return r}(e)},t.prototype.serialize=function(t){return i.jsonToXML(t)},t.prototype.getFields=function(t){return t},t.prototype.getRows=function(t){if("string"==typeof t&&(t=this._fromString(t)),t){var e=t.childNodes&&t.childNodes[0]&&t.childNodes[0].childNodes;return e&&e.length?this._getRows(e):null}return[]},t.prototype._getRows=function(t){for(var e=[],r=0;r<t.length;r++)"item"===t[r].tagName&&e.push(this._nodeToJS(t[r]));return e},t.prototype._fromString=function(t){try{return(new DOMParser).parseFromString(t,"text/xml")}catch(t){return null}},t.prototype._nodeToJS=function(t){var e={};if(this._haveAttrs(t))for(var r=t.attributes,i=0;i<r.length;i++){var n=r[i],o=n.name,s=n.value;e[o]=this._toType(s)}if(3===t.nodeType)return e.value=e.value||this._toType(t.textContent),e;var a=t.childNodes;if(a)for(i=0;i<a.length;i++){var u=a[i],c=u.tagName;c&&("items"===c&&u.childNodes?e[c]=this._getRows(u.childNodes):this._haveAttrs(u)?e[c]=this._nodeToJS(u):e[c]=this._toType(u.textContent))}return e},t.prototype._toType=function(t){return"false"===t||"true"===t?"true"===t:isNaN(t)?t:Number(t)},t.prototype._haveAttrs=function(t){return t.attributes&&t.attributes.length},t}();e.XMLDriver=n},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=4;function n(t){return" ".repeat(t)}function o(t,e){void 0===e&&(e=i);var r=n(e)+"<item>\n";for(var s in t)Array.isArray(t[s])?(r+=n(e+i)+"<"+s+">\n",r+=t[s].map(function(t){return o(t,e+2*i)}).join("\n")+"\n",r+=n(e+i)+"</"+s+">\n"):r+=n(e+i)+"<"+s+">"+t[s]+"</"+s+">\n";return r+=n(e)+"</item>"}e.jsonToXML=function(t,e){void 0===e&&(e="root");for(var r='<?xml version="1.0" encoding="iso-8859-1"?>\n<'+e+">",i=0;i<t.length;i++)r+="\n"+o(t[i]);return r+"\n</"+e+">"}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=r(0),n=function(){function t(){}return t.prototype.sort=function(t,e){var r=this;e.rule&&"function"==typeof e.rule?this._sort(t,e):e.by&&(e.rule=function(t,n){var o=r._checkVal(e.as,t[e.by]),s=r._checkVal(e.as,n[e.by]);return i.naturalCompare(o.toString(),s.toString())},this._sort(t,e))},t.prototype._checkVal=function(t,e){return t?t.call(this,e):e},t.prototype._sort=function(t,e){var r=this,i={asc:1,desc:-1};return t.sort(function(t,n){return e.rule.call(r,t,n)*(i[e.dir]||i.asc)})},t}();e.Sort=n},function(t,e,r){"use strict";var i=this&&this.__assign||function(){return(i=Object.assign||function(t){for(var e,r=1,i=arguments.length;r<i;r++)for(var n in e=arguments[r])Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t}).apply(this,arguments)};function n(t,e,r){for(void 0===e&&(e="dhx_id"),void 0===r&&(r="target"),t instanceof Event&&(t=t[r]);t;){if(t.getAttribute&&t.getAttribute(e))return t;t=t.parentNode}}Object.defineProperty(e,"__esModule",{value:!0}),r(21),e.toNode=function(t){return"string"==typeof t&&(t=document.getElementById(t)||document.querySelector(t)),t||document.body},e.eventHandler=function(t,e){var r=Object.keys(e);return function(i){for(var n=t(i),o=i.target;o;){var s=o.getAttribute&&o.getAttribute("class")||"";if(s.length)for(var a=s.split(" "),u=0;u<r.length;u++)if(a.indexOf(r[u])>-1)return e[r[u]](i,n);o=o.parentNode}return!0}},e.locate=function(t,e){void 0===e&&(e="dhx_id");var r=n(t,e);return r?r.getAttribute(e):""},e.locateNode=n,e.locateNodeByClassName=function(t,e){for(t instanceof Event&&(t=t.target);t;){if(e){if(t.classList&&t.classList.contains(e))return t}else if(t.getAttribute&&t.getAttribute("dhx_id"))return t;t=t.parentNode}},e.getBox=function(t){var e=t.getBoundingClientRect(),r=document.body,i=window.pageYOffset||r.scrollTop,n=window.pageXOffset||r.scrollLeft;return{top:e.top+i,left:e.left+n,right:r.offsetWidth-e.right,bottom:r.offsetHeight-e.bottom,width:e.right-e.left,height:e.bottom-e.top}};var o,s=-1;function a(t){var e=t.getBoundingClientRect();return{left:e.left+window.pageXOffset,right:e.right+window.pageXOffset,top:e.top+window.pageYOffset,bottom:e.bottom+window.pageYOffset}}function u(t,e){var r=e.mode===o.bottom||e.mode===o.top?h(t,e):f(t,e),i=r.left,n=r.top;return{left:Math.round(i)+"px",top:Math.round(n)+"px",minWidth:Math.round(e.width)+"px",position:"absolute"}}function c(){return{rightBorder:window.pageXOffset+window.innerWidth,bottomBorder:window.pageYOffset+window.innerHeight}}function h(t,e){var r,n,s=c(),a=s.rightBorder,u=s.bottomBorder-t.bottom-e.height,h=t.top-e.height;if(e.mode===o.bottom?u>=0?n=t.bottom:h>=0&&(n=h):h>=0?n=h:u>=0&&(n=t.bottom),u<0&&h<0){if(e.auto)return f(t,i({},e,{mode:o.right,auto:!1}));n=u>h?t.bottom:h}if(e.centering)r=function(t,e,r){var i=(e-(t.right-t.left))/2,n=t.left-i,o=t.right+i;return n>=0&&o<=r?n:n<0?0:r-e}(t,e.width,a);else{var l=a-t.left-e.width,d=t.right-e.width;r=l>=0?t.left:d>=0?d:d>l?t.left:d}return{left:r,top:n}}function f(t,e){var r,n,s=c(),a=s.rightBorder,u=s.bottomBorder,f=a-t.right-e.width,l=t.left-e.width;if(e.mode===o.right?f>=0?r=t.right:l>=0&&(r=l):l>=0?r=l:f>=0&&(r=t.right),l<0&&f<0){if(e.auto)return h(t,i({},e,{mode:o.bottom,auto:!1}));r=l>f?l:t.right}if(e.centering)n=function(t,e,r){var i=(e-(t.bottom-t.top))/2,n=t.top-i,o=t.bottom+i;return n>=0&&o<=r?n:n<0?0:r-e}(t,e.height,a);else{var d=t.bottom-e.height,p=u-t.top-e.height;n=p>=0?t.top:d>0?d:d>p?d:t.top}return{left:r,top:n}}e.getScrollbarWidth=function(){if(s>-1)return s;var t=document.createElement("div");return document.body.appendChild(t),t.style.cssText="position: absolute;left: -99999px;overflow:scroll;width: 100px;height: 100px;",s=t.offsetWidth-t.clientWidth,document.body.removeChild(t),s},e.fitPosition=function(t,e){return u(a(t),e)},e.isIE=function(){var t=window.navigator.userAgent;return t.indexOf("MSIE ")>-1||t.indexOf("Trident/")>-1},e.getRealPosition=a,function(t){t.left="left",t.right="right",t.bottom="bottom",t.top="top"}(o=e.Position||(e.Position={})),e.calculatePosition=u},function(t,e){if(Element&&!Element.prototype.matches){var r=Element.prototype;r.matches=r.matchesSelector||r.mozMatchesSelector||r.msMatchesSelector||r.oMatchesSelector||r.webkitMatchesSelector}},function(t,e,r){"use strict";var i=this&&this.__extends||function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function i(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}();Object.defineProperty(e,"__esModule",{value:!0});var n=r(6),o=r(7),s=r(1),a=r(0),u=r(2);function c(t,e,r,i){void 0!==i&&-1!==i&&t[r]&&t[r][i]?t[r].splice(i,0,e):(t[r]||(t[r]=[]),t[r].push(e))}var h=function(t){function e(e,r){var i,o=t.call(this,e,r)||this,s=o._root="_ROOT_"+n.uid();return o._childs=((i={})[s]=[],i),o._initChilds=null,o}return i(e,t),e.prototype.add=function(t,e,r){var i=this;return void 0===e&&(e=-1),void 0===r&&(r=this._root),"object"!=typeof t&&(t={value:t}),Array.isArray(t)?t.map(function(t,n){return i._add(t,e,r,n)}):this._add(t,e,r)},e.prototype.getRoot=function(){return this._root},e.prototype.getParent=function(t,e){if(void 0===e&&(e=!1),!this._pull[t])return null;var r=this._pull[t].parent;return e?this._pull[r]:r},e.prototype.getItems=function(t){return this._childs&&this._childs[t]?this._childs[t]:[]},e.prototype.getLength=function(t){return void 0===t&&(t=this._root),this._childs[t]?this._childs[t].length:null},e.prototype.removeAll=function(e){var r;if(e)for(var i=0,n=this._childs[e].slice();i<n.length;i++){var o=n[i];this.remove(o.id)}else{t.prototype.removeAll.call(this);var s=this._root;this._initChilds=null,this._childs=((r={})[s]=[],r)}},e.prototype.getIndex=function(t){var e=this.getParent(t);return e&&this._childs[e]?n.findIndex(this._childs[e],function(e){return e.id===t}):-1},e.prototype.sort=function(t){var e=this;if(t){for(var r in this._childs)this._sort.sort(this._childs[r],t);if(this._initChilds&&Object.keys(this._initChilds).length)for(var r in this._initChilds)this._sort.sort(this._initChilds[r],t)}else if(this._childs={},this._parse_data(Object.keys(this._pull).map(function(t){return e._pull[t]})),this._filters)for(var r in this._filters){var i=this._filters[r];this.filter(i.rule,i.config)}this.events.fire(u.DataEvents.change)},e.prototype.filter=function(t,e){var r=this;if(void 0===e&&(e={}),t){this._initChilds||(this._initChilds=this._childs),e.type=e.type||u.TreeFilterType.all,this._filters={},this._filters._={rule:t,config:e};var i={};this._recursiveFilter(t,e,this._root,0,i),Object.keys(i).forEach(function(t){for(var e=r.getParent(t),n=r.getItem(t);e;)i[e]||(i[e]=[]),n&&!i[e].find(function(t){return t.id===n.id})&&i[e].push(n),n=r.getItem(e),e=r.getParent(e)}),this._childs=i,this.events.fire(u.DataEvents.change)}else this.restoreOrder()},e.prototype.restoreOrder=function(){this._initChilds&&(this._childs=this._initChilds,this._initChilds=null),this.events.fire(u.DataEvents.change)},e.prototype.copy=function(t,e,r,i){var n=this;return void 0===r&&(r=this),void 0===i&&(i=this._root),t instanceof Array?t.map(function(t,o){return n._copy(t,e,r,i,o)}):this._copy(t,e,r,i)},e.prototype.move=function(t,e,r,i){var n=this;return void 0===r&&(r=this),void 0===i&&(i=this._root),t instanceof Array?t.map(function(t,o){return n._move(t,e,r,i,o)}):this._move(t,e,r,i)},e.prototype.forEach=function(t,e,r){if(void 0===e&&(e=this._root),void 0===r&&(r=1/0),this.haveItems(e)&&!(r<1))for(var i=this._childs[e],n=0;n<i.length;n++)t.call(this,i[n],n,i),this.haveItems(i[n].id)&&this.forEach(t,i[n].id,--r)},e.prototype.eachChild=function(t,e,r,i){if(void 0===r&&(r=!0),void 0===i&&(i=function(){return!0}),this.haveItems(t))for(var n=0;n<this._childs[t].length;n++)e.call(this,this._childs[t][n],n),r&&i(this._childs[t][n])&&this.eachChild(this._childs[t][n].id,e,r,i)},e.prototype.getNearId=function(t){return t},e.prototype.loadItems=function(t,e){var r=this;void 0===e&&(e="json");var i=this.config.autoload+"?id="+t;new s.DataProxy(i).load().then(function(i){i=(e=a.toDataDriver(e)).toJsonArray(i),r._parse_data(i,t),r.events.fire(u.DataEvents.change)})},e.prototype.refreshItems=function(t,e){void 0===e&&(e="json"),this.removeAll(t),this.loadItems(t,e)},e.prototype.eachParent=function(t,e,r){void 0===r&&(r=!1);var i=this.getItem(t);if(i&&(r&&e.call(this,i),i.parent!==this._root)){var n=this.getItem(i.parent);e.call(this,n),this.eachParent(i.parent,e)}},e.prototype.haveItems=function(t){return t in this._childs},e.prototype.canCopy=function(t,e){if(t===e)return!1;var r=!0;return this.eachParent(e,function(e){return e.id===t?r=!1:null}),r},e.prototype.serialize=function(t,e){void 0===t&&(t=u.DataDriver.json);var r=this._serialize(this._root,e),i=a.toDataDriver(t);if(i)return i.serialize(r)},e.prototype.getId=function(t,e){if(void 0===e&&(e=this._root),this._childs[e]&&this._childs[e][t])return this._childs[e][t].id},e.prototype.map=function(t,e,r){void 0===e&&(e=this._root),void 0===r&&(r=!0);var i=[];if(!this.haveItems(e))return i;for(var n=0;n<this._childs[e].length;n++)if(i.push(t.call(this,this._childs[e][n],n,this._childs)),r){var o=this.map(t,this._childs[e][n].id,r);i=i.concat(o)}return i},e.prototype._add=function(e,r,i,n){void 0===r&&(r=-1),void 0===i&&(i=this._root),e.parent=e.parent?e.parent.toString():i,n>0&&-1!==r&&(r+=1);var o=t.prototype.add.call(this,e,r);if(Array.isArray(e.items))for(var s=0,a=e.items;s<a.length;s++){var u=a[s];this.add(u,-1,e.id)}return o},e.prototype._copy=function(t,e,r,i,o){if(void 0===r&&(r=this),void 0===i&&(i=this._root),!this.exists(t))return null;var s=this._childs[t];if(o&&(e=-1===e?-1:e+o),r===this&&!this.canCopy(t,i))return null;var u=a.copyWithoutInner(this.getItem(t),{items:!0});if(r.exists(t)&&(u.id=n.uid()),a.isTreeCollection(r)){if(this.exists(t)&&(u.parent=i,r!==this&&i===this._root&&(u.parent=r.getRoot()),r.add(u,e),t=u.id),s)for(var c=0,h=s;c<h.length;c++){var f=h[c].id,l=this.getIndex(f);"string"==typeof t&&this.copy(f,l,r,t)}return t}r.add(u,e)},e.prototype._move=function(t,e,r,i,n){if(void 0===r&&(r=this),void 0===i&&(i=this._root),!this.exists(t))return null;if(n&&(e=-1===e?-1:e+n),r!==this){if(!a.isTreeCollection(r))return r.add(a.copyWithoutInner(this.getItem(t)),e),void this.remove(t);var o=this.copy(t,e,r,i);return this.remove(t),o}if(!this.canCopy(t,i))return null;var s=this.getParent(t),c=this.getIndex(t),h=this._childs[s].splice(c,1)[0];return h.parent=i,this._childs[s].length||delete this._childs[s],this.haveItems(i)||(this._childs[i]=[]),-1===e?e=this._childs[i].push(h):this._childs[i].splice(e,0,h),this.events.fire(u.DataEvents.change),t},e.prototype._removeAll=function(e){var r;if(e)for(var i=0,n=this._childs[e].slice();i<n.length;i++){var o=n[i];this.remove(o.id)}else{t.prototype._removeAll.call(this);var s=this._root;this._initChilds=null,this._childs=((r={})[s]=[],r)}},e.prototype._removeCore=function(t){if(this._pull[t]){var e=this.getParent(t);this._childs[e]=this._childs[e].filter(function(e){return e.id!==t}),e===this._root||this._childs[e].length||delete this._childs[e],this._initChilds&&this._initChilds[e]&&(this._initChilds[e]=this._initChilds[e].filter(function(e){return e.id!==t}),e===this._root||this._initChilds[e].length||delete this._initChilds[e]),this._fastDeleteChilds(this._childs,t),this._initChilds&&this._fastDeleteChilds(this._initChilds,t)}},e.prototype._addToOrder=function(t,e,r){var i=this._childs,n=this._initChilds,o=e.parent;this._pull[e.id]=e,c(i,e,o,r),n&&c(n,e,o,r)},e.prototype._parse_data=function(t,e){void 0===e&&(e=this._root);for(var r=0,i=t;r<i.length;r++){var o=i[r];this.config.init&&(o=this.config.init(o)),"object"!=typeof o&&(o={value:o}),o.id=o.id?o.id.toString():n.uid(),o.parent=o.parent?o.parent.toString():e,this._pull[o.id]=o,this._childs[o.parent]||(this._childs[o.parent]=[]),this._childs[o.parent].push(o),o.items&&o.items instanceof Object&&this._parse_data(o.items,o.id)}},e.prototype._fastDeleteChilds=function(t,e){if(this._pull[e]&&delete this._pull[e],t[e]){for(var r=0;r<t[e].length;r++)this._fastDeleteChilds(t,t[e][r].id);delete t[e]}},e.prototype._recursiveFilter=function(t,e,r,i,n){var o=this,s=this._childs[r];if(s){var a=function(t){switch(e.type){case u.TreeFilterType.all:return!0;case u.TreeFilterType.level:return i===e.level;case u.TreeFilterType.leafs:return!o.haveItems(t.id)}};if("function"==typeof t){var c=function(e){return a(e)&&t(e)};(h=s.filter(c)).length&&(n[r]=h)}else if(t.by&&t.match){var h;c=function(e){return a(e)&&-1!==e[t.by].toString().toLowerCase().indexOf(t.match.toString().toLowerCase())};(h=s.filter(c)).length&&(n[r]=h)}for(var f=0,l=s;f<l.length;f++){var d=l[f];this._recursiveFilter(t,e,d.id,i+1,n)}}},e.prototype._serialize=function(t,e){var r=this;return void 0===t&&(t=this._root),this.map(function(t){var i={};for(var n in t)"parent"!==n&&"items"!==n&&(i[n]=t[n]);return e&&(i=e(i)),r.haveItems(t.id)&&(i.items=r._serialize(t.id,e)),i},t,!1)},e}(o.DataCollection);e.TreeCollection=h},function(t,e,r){"use strict";(function(t){var i=this&&this.__extends||function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function i(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}();Object.defineProperty(e,"__esModule",{value:!0});var n=r(1),o=r(6),s=r(5),a=function(e){function r(t,r){var i=e.call(this,t)||this;return i.config=o.extend({from:0,limit:50},r),i.updateUrl(t,{from:i.config.from,limit:i.config.limit}),i}return i(r,e),r.prototype.load=function(){var e=this;return new t(function(t){e._timeout?(clearTimeout(e._timeout),e._timeout=setTimeout(function(){s.ajax.get(e.url,{responseType:"text"}).then(t),e._cooling=!0},e.config.delay),e._cooling&&(t(null),e._cooling=!1)):(s.ajax.get(e.url,{responseType:"text"}).then(t),e._cooling=!0,e._timeout=setTimeout(function(){}))})},r}(n.DataProxy);e.LazyDataProxy=a}).call(this,r(3))}])}),window.dhx_legacy){if(window.dhx)for(var key in dhx)dhx_legacy[key]=dhx[key];window.dhx=dhx_legacy,delete window.dhx_legacy}